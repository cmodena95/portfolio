<div data-controller="slide hover" style="max-width: 80vw; overflow: hidden;">
  <div class="grid-3" data-slide-target="index">
    <% @illustrations.each do |illustration| %>
      <div>
        <%= cl_image_tag illustration.main_photo.key, data: {action: "click->slide#infoIn", ref: illustration.id} %>
      </div>
    <% end %>
  </div>

  <% @illustrations.each do |illustration| %>
    <div class="illustration-show hidden" data-slide-target="modal" style="display: none;" data-ref="<%= illustration.id %>">
      <div class="illustration-show-top">
        <%= image_tag "illustrations/arrow_bw.png", data: {action: "mouseover->hover#color mouseout->hover#decolor click->slide#infoOut",
        color: "#{image_path "illustrations/arrow_col.png"}", 
        bw: "#{image_path "illustrations/arrow_bw.png"}",
        ref: illustration.id} %>
      </div>

      <div class="illustration-show-content">
        <div class="illustration-show-content-top">
          <%= cl_image_tag illustration.main_photo.key %>

          <div class="illustration-show-description">
            <p><%= illustration.description %></p>
          </div>
        </div>

        <% if illustration.photos.attached? %>
          <div class="illustrations-photos">
            <% illustration.photos.each do |photo| %>
              <%= cl_image_tag photo.key, class: "#{illustration.photos.length.odd? && illustration.photos.last.key == photo.key ? "final-photo" : ""}" %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>